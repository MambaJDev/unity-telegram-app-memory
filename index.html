<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, shrink-to-fit=yes">
    <title>Unity Web Player | Memory</title>

    <!-- –ü–û–î–ö–õ–Æ–ß–ê–ï–ú TELEGRAM SDK -->
    <script src="https://telegram.org"></script>

    <style>
      /* –û–±—â–∏–µ —Å—Ç–∏–ª–∏ */
      body { background: #000; color: #fff; margin: 0; padding: 0; overflow: hidden; font-family: sans-serif; }
      #unity-canvas { background: #000; width: 100%; height: 100%; position: fixed; }

      /* –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏ */
      #loading-info {
        position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
        text-align: center; width: 100%; z-index: 10;
      }
      .spinner {
        width: 40px; height: 40px; border: 4px solid #333; border-top: 4px solid #3498db;
        border-radius: 50%; animation: spin 1s linear infinite; margin: 10px auto;
      }
      @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

      /* –ó–ê–©–ò–¢–ê –û–¢ –ü–û–í–û–†–û–¢–ê –≠–ö–†–ê–ù–ê (CSS-–ó–ê–ì–õ–£–®–ö–ê) */
      @media screen and (orientation: landscape) {
        body::before {
          content: "üîÑ –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–µ—Ä–Ω–∏—Ç–µ —Ç–µ–ª–µ—Ñ–æ–Ω –≤ –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ–µ –ø–æ–ª–æ–∂–µ–Ω–∏–µ";
          position: fixed; top: 0; left: 0; width: 100vw; height: 100vh;
          background: #000; color: white; z-index: 9999;
          display: flex; align-items: center; justify-content: center;
          text-align: center; padding: 20px; box-sizing: border-box; font-size: 20px;
        }
        #unity-canvas { display: none !important; }
      }
    </style>
  </head>
  <body>
    <!-- –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏ -->
    <div id="loading-info">
      <div class="spinner"></div>
      <div id="loading-text">–ó–∞–≥—Ä—É–∑–∫–∞: 0%</div>
    </div>

    <canvas id="unity-canvas" tabindex="-1"></canvas>

    <script src="Build/MemoryAPP_WEBGL_Build.loader.js"></script>
    <script>
      // 1. –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø TELEGRAM
      if (window.Telegram && window.Telegram.WebApp) {
          const twa = window.Telegram.WebApp;
          twa.ready();
          twa.expand(); // –†–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ–º –Ω–∞ –≤–µ—Å—å —ç–∫—Ä–∞–Ω
          
          // –ü—Ä–æ–±—É–µ–º –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏—é –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ (SDK 7.0+)
          if (twa.lockOrientation) {
              try { twa.lockOrientation(); } catch(e) { console.log("Orientation lock error"); }
          }
      }

      var canvas = document.querySelector("#unity-canvas");
      var loadingInfo = document.querySelector("#loading-info");
      var loadingText = document.querySelector("#loading-text");

      // 2. –ó–ê–ü–£–°–ö UNITY
      // –í–ù–ò–ú–ê–ù–ò–ï: –ï—Å–ª–∏ —Ñ–∞–π–ª—ã –Ω–∞ GitHub –Ω–∞–∑—ã–≤–∞—é—Ç—Å—è –±–µ–∑ .unityweb, —É–¥–∞–ª–∏ —ç—Ç–æ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ –Ω–∏–∂–µ!
      createUnityInstance(canvas, {
        arguments: [],
        dataUrl: "Build/MemoryAPP_WEBGL_Build.data.unityweb",
        frameworkUrl: "Build/MemoryAPP_WEBGL_Build.framework.js.unityweb",
        codeUrl: "Build/MemoryAPP_WEBGL_Build.wasm.unityweb",
        streamingAssetsUrl: "StreamingAssets",
        companyName: "SergioJavanny",
        productName: "Memory",
        productVersion: "0.1.0",
      }, (progress) => {
          // –û–±–Ω–æ–≤–ª—è–µ–º –ø—Ä–æ—Ü–µ–Ω—Ç—ã –∑–∞–≥—Ä—É–∑–∫–∏
          loadingText.innerHTML = "–ó–∞–≥—Ä—É–∑–∫–∞: " + Math.round(100 * progress) + "%";
      }).then((unityInstance) => {
          // –°–∫—Ä—ã–≤–∞–µ–º –∑–∞–≥—Ä—É–∑—á–∏–∫, –∫–æ–≥–¥–∞ –∏–≥—Ä–∞ –≥–æ—Ç–æ–≤–∞
          loadingInfo.style.display = "none";
      }).catch((message) => {
          alert("–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏: " + message);
      });
    </script>
  </body>
</html>
