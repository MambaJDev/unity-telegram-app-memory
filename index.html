<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, shrink-to-fit=yes">
    <title>Unity Web Player | Memory</title>

    <!-- 1. –ü–û–î–ö–õ–Æ–ß–ê–ï–ú TELEGRAM SDK -->
    <script src="https://telegram.org"></script>

    <style>
      /* –ë–∞–∑–æ–≤—ã–µ —Å—Ç–∏–ª–∏ */
      body { 
        background: #000; color: #fff; margin: 0; padding: 0; overflow: hidden; font-family: sans-serif; 
        display: flex; justify-content: center; align-items: center; height: 100vh;
      }

      /* –û–ì–†–ê–ù–ò–ß–ï–ù–ò–ï –î–õ–Ø –ü–ö: –ß—Ç–æ–±—ã –∏–≥—Ä–∞ –Ω–µ –±—ã–ª–∞ –æ–≥—Ä–æ–º–Ω–æ–π –Ω–∞ –≤–µ—Å—å –º–æ–Ω–∏—Ç–æ—Ä */
      #unity-canvas { 
        background: #000; width: 100%; height: 100%; 
        max-width: 500px; /* –û–ø—Ç–∏–º–∞–ª—å–Ω–∞—è —à–∏—Ä–∏–Ω–∞ –¥–ª—è –ü–ö */
        aspect-ratio: 9 / 16; /* –ü—Ä–æ–ø–æ—Ä—Ü–∏–∏ —Å–º–∞—Ä—Ç—Ñ–æ–Ω–∞ */
        box-shadow: 0 0 50px rgba(0,0,0,0.8);
      }

      /* –°—Ç–∏–ª–∏ –¥–ª—è –º–æ–±–∏–ª–æ–∫ (–Ω–∞ –≤–µ—Å—å —ç–∫—Ä–∞–Ω) */
      @media screen and (max-width: 768px) {
        #unity-canvas { max-width: none; aspect-ratio: auto; position: fixed; }
      }

      /* –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏ */
      #loading-info {
        position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
        text-align: center; width: 100%; z-index: 10;
      }
      .spinner {
        width: 40px; height: 40px; border: 4px solid #333; border-top: 4px solid #3498db;
        border-radius: 50%; animation: spin 1s linear infinite; margin: 10px auto;
      }
      @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

      /* –ó–ê–©–ò–¢–ê –û–¢ –ü–û–í–û–†–û–¢–ê (CSS-–ó–ê–ì–õ–£–®–ö–ê) */
      @media screen and (orientation: landscape) and (max-width: 1024px) {
        body::before {
          content: "üîÑ –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–µ—Ä–Ω–∏—Ç–µ —Ç–µ–ª–µ—Ñ–æ–Ω –≤ –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ–µ –ø–æ–ª–æ–∂–µ–Ω–∏–µ";
          position: fixed; top: 0; left: 0; width: 100vw; height: 100vh;
          background: #000; color: white; z-index: 9999;
          display: flex; align-items: center; justify-content: center;
          text-align: center; padding: 20px; box-sizing: border-box; font-size: 20px;
        }
        #unity-canvas { display: none !important; }
        #loading-info { display: none !important; }
      }
    </style>
  </head>
  <body>
    <!-- –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏ -->
    <div id="loading-info">
      <div class="spinner"></div>
      <div id="loading-text">–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è: 0%</div>
    </div>

    <canvas id="unity-canvas" tabindex="-1"></canvas>

    <script src="Build/MemoryAPP_WEBGL_Build.loader.js"></script>
    <script>
      // 2. –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø TELEGRAM
      if (window.Telegram && window.Telegram.WebApp) {
          const twa = window.Telegram.WebApp;
          twa.ready();
          twa.expand(); // –†–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ–º –Ω–∞ –≤–µ—Å—å —ç–∫—Ä–∞–Ω
          
          // –ü—Ä–æ–±—É–µ–º –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏—é (SDK 7.0+)
          if (twa.lockOrientation) {
              try { twa.lockOrientation(); } catch(e) { console.log("Orientation lock not supported"); }
          }
      }

      var canvas = document.querySelector("#unity-canvas");
      var loadingInfo = document.querySelector("#loading-info");
      var loadingText = document.querySelector("#loading-text");

      // 3. –ó–ê–ü–£–°–ö UNITY
      // –í–ê–ñ–ù–û: –ï—Å–ª–∏ —Ñ–∞–π–ª—ã –Ω–∞ GitHub –Ω–∞–∑—ã–≤–∞—é—Ç—Å—è .br –∏–ª–∏ .gz, –∑–∞–º–µ–Ω–∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è –Ω–∏–∂–µ!
      createUnityInstance(canvas, {
        arguments: [],
        dataUrl: "Build/MemoryAPP_WEBGL_Build.data.unityweb",
        frameworkUrl: "Build/MemoryAPP_WEBGL_Build.framework.js.unityweb",
        codeUrl: "Build/MemoryAPP_WEBGL_Build.wasm.unityweb",
        streamingAssetsUrl: "StreamingAssets",
        companyName: "SergioJavanny",
        productName: "Memory",
        productVersion: "0.1.0",
        // –ê–í–¢–û–°–û–•–†–ê–ù–ï–ù–ò–ï –î–ê–ù–ù–´–•
        autoSyncPersistentDataPath: true, 
      }, (progress) => {
          loadingText.innerHTML = "–ó–∞–≥—Ä—É–∑–∫–∞ —Ä–µ—Å—É—Ä—Å–æ–≤: " + Math.round(100 * progress) + "%";
      }).then((unityInstance) => {
          loadingInfo.style.display = "none";
          console.log("Unity Game Loaded!");
      }).catch((message) => {
          console.error("Unity Error: " + message);
      });
    </script>
  </body>
</html>
